
@{
    Layout = null;
}


<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">

    <title>Otopark Uygulaması</title>
    <style>
        html, body, #mapvw {
            padding: 0;
            margin: 0;
            height: 100%;
            width: 100%;
        }
    </style>

    <!-- Harita için esri js -->
    <link rel="stylesheet" href="https://js.arcgis.com/4.18/esri/themes/light/main.css">
    <script src="https://js.arcgis.com/4.18/"></script>

    <!-- Data Çekmek için JQUERY -->
    @*<script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>*@

    <!-- Data Çekmek için(örnekteki) JQUERY minify -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script> 




    <script>
        require(["esri/Map", "esri/views/MapView"], function (Map, MapView) {
            var map = new Map({
                basemap: "topo-vector"
            });

            var view = new MapView({
                container: "mapvw",
                map: map,
                center: [28.9795, 41.015137], // longitude, latitude
                zoom: 13
            });
        });
        require(["esri/PopupTemplate"], function (PopupTemplate) { /* code goes here */ });


        const sketch = new Sketch({
            layer: layer,
            view: view,
            availableCreateTools: ["point"]
        });

        view.ui.add(sketch, "top-right");

        sketch.on('create', function (evt) {
            console.log("X = ", evt.graphic.geometry.x);
            console.log("Y = ", evt.graphic.geometry.y);
        });
});
    </script>
</head>
<body>
    <div id="mapvw"></div>
</body>
</html>

<script>
    var url = 'https://data.ibb.gov.tr/api/3/action/datastore_search?resource_id=c3eb0d72-1ce4-4983-a3a8-6b0b4b19fcb9'

    $.getJSON(url, function (data) { })
</script>



<script>
    ////var url = 'https://data.ibb.gov.tr/api/3/action/datastore_search?resource_id=c3eb0d72-1ce4-4983-a3a8-6b0b4b19fcb9'

    var data = {
        resource_id: 'c3eb0d72-1ce4-4983-a3a8-6b0b4b19fcb9', // the resource id
        // limit: 5 // get 5 results
        //q: 'jones' // query for 'jones'
    };
    let headers = new Headers();
    $.ajax({

       
        url: 'https://data.ibb.gov.tr/api/3/action/datastore_search?resource_id=c3eb0d72-1ce4-4983-a3a8-6b0b4b19fcb9',
        type: 'GET', mode: 'cors',
        headers: {
            'Content-type': 'application/json; charset:UTF-8,  Access-Allow-Origin-Credentials: true, Access- Control - Allow - Origin: https://localhost:44398' },
      //headers : headers.Append('Access-Control-Allow-Origin', 'https://localhost:44398/'),
      //  headers: headers.Append('Access-Control-Allow-Credentials', 'true'),
          data: data,
        datatype: 'jsonp',
        success: function (data) {
            alert('total results found: ' + data.result.total)
        }
    });


    //fetch(url,
    //    {
    //        method: 'GET',mode:'no-cors', headers: { 'Content-type':'application/json; charset:UTF-8, Access-Control-Allow-Origin: *, Access-Allow-Origin-Credentials: true'}
    //    })


    //    .then((res) => res.json())
    //    .then((data) => {
    //        console.log(data)
    //        data.forEach(element => {
    //            $("body").append(`
    //                            <div>
    //                                <p>`+ element.userId + `</p>
    //                                <p>`+ element.id + `</p>
    //                                <p>`+ element.title + `</p>
    //                                <p>`+ element.body + `</p>
    //                            </div>
    //                            `)
    //        });
    //    })

</script>

@*<script>
    var data = {
        resource_id: 'c3eb0d72-1ce4-4983-a3a8-6b0b4b19fcb9', // the resource id
        limit: 5, // get 5 results
        q: 'jones' // query for 'jones'
    };
    $.ajax({
        url: 'https://data.ibb.gov.tr/api/3/action/datastore_search',
        data: data,
        dataType: 'jsonp',
        success: function (data) {
            alert('Total results found: ' + data.result.total)
        }
    });

</script>*@


